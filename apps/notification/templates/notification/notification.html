{% extends "base.html" %}
{% load static %}

{% block title %}Уведомления | Система прогнозирования успеваемости{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/notification.css' %}">
{% endblock %}

{% block content %}
<div class="container">
  <!-- LEFT MENU -->
  <article class="menu-container">
    <div class="menu-header">
      <img src="{% static 'images/logo.png' %}" alt="Logo" class="logo" />
      <span class="app-name">Base</span>
    </div>
    <nav class="menu-items">
      <a href="{% url 'dashboard' %}" class="menu-item"><img src="{% static 'images/dashboard2.png' %}" class="icon" /><span>Дашборд</span></a>
      <a href="{% url 'notification' %}" class="menu-item"><img src="{% static 'images/notification.png' %}" class="icon" /><span>Уведомления</span></a>
      <a href="{% url 'support' %}" class="menu-item"><img src="{% static 'images/support.png' %}" class="icon" /><span>Поддержка</span></a>
      <a href="{% url 'settings' %}" class="menu-item"><img src="{% static 'images/setting.png' %}" class="icon" /><span>Настройки</span></a>
    </nav>
    <div class="menu-footer">
      <a href="{% url 'logout' %}" class="menu-item logout"><img src="{% static 'images/Logout.png' %}" class="icon" /><span>Выйти</span></a>
    </div>
  </article>

  <!-- MIDDLE NOTIFICATION AREA -->
  <section class="notification-side">
    <h2 class="notification-title">Уведомления</h2>
    
    <div class="message-box">
      {% for notification in notifications %}
        <div class="message">
          {% if notification.notification_type == 'assignment' %}
            <img src="{% static 'images/assignment.png' %}" alt="Assignment" class="icon">
          {% elif notification.notification_type == 'deadline' %}
            <img src="{% static 'images/deadline.png' %}" alt="Deadline" class="icon">
          {% elif notification.notification_type == 'grade' %}
            <img src="{% static 'images/grade.png' %}" alt="Grade" class="icon">
          {% elif notification.notification_type == 'announcement' %}
            <img src="{% static 'images/announcement.png' %}" alt="Announcement" class="icon">
          {% else %}
            <img src="{% static 'images/system.png' %}" alt="System" class="icon">
          {% endif %}
          
          <div class="message-text">
            <h3>{{ notification.title }}</h3>
            <p>{{ notification.message }}</p>
            <small>{{ notification.created_at|date:"d.m.Y H:i" }}</small>
          </div>
        </div>
      {% empty %}
        <div class="message">
          <img src="{% static 'images/system.png' %}" alt="System" class="icon">
          <div class="message-text">
            <h3>У вас нет уведомлений</h3>
            <p>Когда появятся новые уведомления, вы увидите их здесь.</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- RIGHT SIDEBAR (PROFILE) -->
  <aside class="profile">
    <div class="avatar">
      <!-- Placeholder for user avatar -->
    </div>
    <div class="info">
      <h3>{{ user.username }}</h3>
      <p>{{ user.email }}</p>
      <p>{{ user.student_number }}</p>
    </div>
    <div class="courses">
      {% for student_course in user.courses.all %}
        <button class="{% if forloop.first %}active{% endif %}">{{ student_course.course.name }}</button>
      {% empty %}
        <button class="active">Математический анализ</button>
        <button>Введение в программирование</button>
        <button>Статистика</button>
        <button>Машинное обучение</button>
      {% endfor %}
    </div>
  </aside>
</div>
{% endblock %}